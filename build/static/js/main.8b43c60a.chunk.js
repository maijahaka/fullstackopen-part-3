(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),o=t(15),u=t.n(o),a=t(6),i=t(3),l=function(e){var n=e.handleButtonClick,t=e.person;return Object(c.jsx)("button",{onClick:function(){return n(t)},children:"delete"})},s=function(e){var n=e.person,t=e.handleButtonClick;return Object(c.jsxs)("p",{children:[n.name," ",n.number," ",Object(c.jsx)(l,{handleButtonClick:t,person:n})]})},d=function(e){var n=e.persons,t=e.handleButtonClick;return Object(c.jsx)("div",{children:n.map((function(e){return Object(c.jsx)(s,{person:e,handleButtonClick:t},e.name)}))})},b=function(e){return Object(c.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){return Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{value:e.newFilter,onChange:e.handleChange})]})},j=t(4),f=t.n(j),m="/api/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},deleteObject:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.status}))}},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),l=Object(i.a)(u,2),s=l[0],j=l[1],f=Object(r.useState)(""),m=Object(i.a)(f,2),g=m[0],p=m[1],v=Object(r.useState)(""),x=Object(i.a)(v,2),w=x[0],C=x[1],k=Object(r.useState)(null),S=Object(i.a)(k,2),y=S[0],B=S[1],N=Object(r.useState)(null),T=Object(i.a)(N,2),A=T[0],D=T[1],z=function(e){var n=e.message;return null==n?null:Object(c.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},E=function(e){var n=e.message;return null==n?null:Object(c.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})};Object(r.useEffect)((function(){O.getAll().then((function(e){o(e)}))}),[]),console.log("render",t.length,"persons");var F=0===w.length?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(z,{message:y}),Object(c.jsx)(E,{message:A}),Object(c.jsx)(h,{newFilter:w,handleChange:function(e){console.log(e.target.value),C(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(b,{handleSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s})))window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&function(){var e=t.find((function(e){return e.name===s})),n=Object(a.a)(Object(a.a)({},e),{},{number:g});O.update(e.id,n).then((function(n){o(t.map((function(t){return t.id!==e.id?t:n}))),B("Changed the number of ".concat(s," to ").concat(g)),setTimeout((function(){B(null)}),5e3)})).catch((function(n){D("Information of ".concat(s," has already been removed from server")),setTimeout((function(){D(null)}),5e3),o(t.filter((function(n){return n.id!==e.id})))}))}();else{var n={name:s,number:g};O.create(n).then((function(e){o(t.concat(e)),B("Added ".concat(s)),setTimeout((function(){B(null)}),5e3),j(""),p("")})).catch((function(e){D(e.response.data.error),setTimeout((function(){D(null)}),5e3)}))}},newName:s,handleNameChange:function(e){console.log(e.target.value),j(e.target.value)},newNumber:g,handleNumberChange:function(e){console.log(e.target.value),p(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(d,{persons:F,handleButtonClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(O.deleteObject(e.id).then((function(n){204===n&&o(t.filter((function(n){return n.id!==e.id})))})),B("Deleted ".concat(e.name)),setTimeout((function(){B(null)}),5e3))}})]})};u.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.8b43c60a.chunk.js.map